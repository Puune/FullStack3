(this["webpackJsonpphonebook-v2"]=this["webpackJsonpphonebook-v2"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),i=t(14),l=t(3),s=t.n(l),f=function(){return s.a.get("/persons").then((function(e){return e.data}))},m=function(e){return s.a.post("/persons",e).then((function(e){return e.data}))},d=function(e){return console.log(e),s.a.delete("/persons"+"/".concat(e)).then((function(e){return e.data}))},h=function(e,n){return s.a.put("/persons"+"/".concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.persons,t=e.setPersons,c=e.setMsg,o=Object(a.useState)(""),l=Object(u.a)(o,2),s=l[0],f=l[1],d=Object(a.useState)(""),p=Object(u.a)(d,2),E=p[0],b=p[1],v=function(e,n){n(e.target.value)};return r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),s.length>0){var a,r={name:s,number:E};if(0===n.length||function(e){return n.every((function(n){return n.name!==e.name}))}(r))m(r).then((function(e){t(n.concat(e))})).catch((function(e){c("Error Adding new person"),setTimeout((function(){c(null)}),5e3)})),c("".concat(r.name," added")),setTimeout((function(){c(null)}),3e3),f(""),b("");else if(window.confirm("".concat(r.name," already exists, replace old number with new one?")))n.forEach((function(e){e.name===r.name&&(a=e.id)})),h(a,r).then((function(e){t((function(){var t=Object(i.a)(n);return t[a-1]=e,t}))})).catch((function(e){c("Error: ".concat(e)),setTimeout((function(){c(null)}),5e3)})),c("".concat(r.name," number updated")),setTimeout((function(){c(null)}),3e3)}}},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:s,onChange:function(e){return v(e,f)}}),"Number: ",r.a.createElement("input",{value:E,onChange:function(e){return v(e,b)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.entry,t=e.setPersons,a=e.setMsg;return r.a.createElement("li",{key:n.id},n.name," : ",n.number," ","   ",r.a.createElement("button",{onClick:function(e){if(window.confirm("Want to delete ".concat(n.name,"?"))){var r=n.id;e.preventDefault(),d(r).catch((function(e){a("Error deleting contact"),setTimeout((function(){a(null)}),5e3)})),f().then((function(e){t(e)})).catch((function(e){a("Error updating persons after deletion"),setTimeout((function(){a(null)}),5e3)})),a("".concat(n.name," deleted")),setTimeout((function(){a(null),window.location.reload(!1)}),3e3)}}},"delete"))},b=function(e){var n=e.persons,t=e.setPersons,a=e.searched,c=e.setMsg;return r.a.createElement("ul",null,function(){var e=[];return n.forEach((function(n){var t=new String(n.name).toUpperCase(),r=new String(a).toUpperCase();t.includes(r)&&e.push(n)})),e}().map((function(e){return function(e,n,t){return r.a.createElement(E,{key:e.id,entry:e,setPersons:n,setMsg:t})}(e,t,c)})))},v=function(e){var n=e.searched,t=e.setSearched;return r.a.createElement("form",null,r.a.createElement("div",null,"Search: ",r.a.createElement("input",{value:n,onChange:function(e){return function(e,n){n(e.target.value)}(e,t)}})))},g=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"notification"},n)},w=function(){Object(a.useEffect)((function(){f().then((function(e){c(e)})).catch((function(e){E("Error reading from db"),setTimeout((function(){E(null)}),5e3)}))}),[]);var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),l=i[0],s=i[1],m=Object(a.useState)(null),d=Object(u.a)(m,2),h=d[0],E=d[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(g,{message:h}),r.a.createElement(v,{searched:l,setSearched:s}),r.a.createElement("h3",null,"Add new contact"),r.a.createElement(p,{persons:t,setPersons:c,setMsg:E}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(b,{persons:t,setPersons:c,searched:l,setMsg:E}))};t(37);o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.327d9487.chunk.js.map